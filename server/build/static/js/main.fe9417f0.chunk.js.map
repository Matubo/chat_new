{"version":3,"sources":["components/room_carousel/room_carousel.js","components/roomJoinPanel/room_join_panel.js","components/message_container/message_container.js","components/chat_input/chat_input.js","assets/img/Send_orange.png","components/authorization/authorization.js","store/reducers/authorization.js","store/reducers/chat_rooms.js","store/reducers/loading.js","store/middleware/root_saga.js","store/store.js","queries/socket.js","queries/queries.js","queries/requests/add_message_to_room.js","queries/requests/set_username.js","queries/requests/create_room.js","queries/requests/join_to_room.js","queries/responses/accept_create_room.js","queries/responses/accept_join_to_room.js","queries/responses/new_messages_on_room.js","queries/responses/accept_set_username.js","components/chat_body/chat_body.js","App.js","reportWebVitals.js","index.js"],"names":["getElemDOM","id","fun","className","onClick","RootCarousel","props","items","changeRoom","carouselDOM","key","push","crutch","length","loop","margin","RoomJoinPanel","joinToRoom","createRoom","useState","room","setRoom","type","onChange","e","target","value","MessageField","messages","userId","map","elem","index","username","text","date","ChatInput","sendMessage","message","setMessage","inpRef","useRef","contenteditable","placeholder","ref","onInput","textContent","current","src","Authorization","setUsername","setUsernameInput","authorized","createSlice","name","initialState","reducers","logIn","state","action","payload","logOut","actions","chatRooms","rooms","currentRoom","addRoom","console","log","currentRoomId","setNewMessage","loading","error","errorMessage","startLoading","finishLoading","loadingError","errMsg","acceptJoinToRoom","newRoomMessage","acceptSetUsername","rootSaga","currentRoomsState","store","res","data","status","select","undefined","currentRoomState","put","takeLatest","sagaMiddleware","createSagaMiddleware","configureStore","reducer","authorization","middleware","getDefaultMiddleware","thunk","serializableCheck","run","authorizationActions","loadingActions","chatRoomsActions","socket","io","ADD_MESSAGE_TO_ROOM","emit","add_message_to_room","SET_USERNAME","set_username","CREATE_ROOM","create_room","JOIN_TO_ROOM","join_to_room","on","accept_create_room","dispatch","accept_join_to_room","new_room_message","accept_set_username","ChatBody","useSelector","useDispatch","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fe9417f0.chunk.js","sourcesContent":["import OwlCarousel from \"react-owl-carousel\";\r\nimport \"owl.carousel/dist/assets/owl.carousel.css\";\r\nimport \"owl.carousel/dist/assets/owl.theme.default.css\";\r\nimport \"./room_carousel.css\";\r\n\r\nconst getElemDOM=(id,fun)=>{\r\n  return <button\r\n        className=\"carousel__item\"\r\n        key={id}\r\n        onClick={() => {\r\n          fun(id);\r\n        }}\r\n      >\r\n        {id}\r\n      </button>\r\n}\r\n\r\nfunction RootCarousel(props) {\r\n  const { items, changeRoom } = props;\r\n    let carouselDOM = [];\r\n\r\n    for (let key in items) {\r\n      const { id } = items[key];\r\n      carouselDOM.push(getElemDOM(id,changeRoom));\r\n    }\r\n\r\n   let crutch = carouselDOM.length;\r\n\r\n  return (\r\n    <OwlCarousel\r\n      className=\"owl-theme carousel\"\r\n      loop\r\n      margin={10}\r\n      items={10}\r\n      loop={false}\r\n      key={crutch}\r\n      dots={true}\r\n    >\r\n      {carouselDOM}\r\n    </OwlCarousel>\r\n  );\r\n}\r\nexport default RootCarousel;\r\n","import { useState } from \"react\";\r\nimport \"./room_join_panel.css\";\r\n\r\nfunction RoomJoinPanel(props) {\r\n  const { joinToRoom, createRoom } = props;\r\n  const [room, setRoom] = useState(0);\r\n  function changeHandler(e) {\r\n    setRoom(e.target.value);\r\n  }\r\n  return (\r\n    <div className=\"room-join-panel\">\r\n      <p className=\"room-join-panel__header\">Введите комнату для подключения</p>\r\n      <input\r\n        className=\"room-join-panel__room-input\"\r\n        type=\"number\"\r\n        onChange={changeHandler}\r\n        value={room}\r\n      ></input>\r\n      <button\r\n        className=\"room-join-panel__join-button\"\r\n        onClick={() => {\r\n          joinToRoom(room);\r\n        }}\r\n      >\r\n        Присоединиться\r\n      </button>\r\n      <button className=\"room-join-panel__create-room-button\" onClick={createRoom}>Создать новую</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RoomJoinPanel;\r\n","import \"./message_container.css\";\r\n\r\nfunction MessageField(props) {\r\n  const { messages, userId } = props;\r\n  return (\r\n    <div className=\"message-container\">\r\n      {messages.length>0 ? (\r\n        messages.map((elem, index) => {\r\n          return (\r\n            <div\r\n              className={\r\n                userId == elem.username\r\n                  ? \"message-container_message self-message\"\r\n                  : \"message-container_message\"\r\n              }\r\n              key={index}\r\n            >\r\n              <p className=\"message-container_message_text\">{elem.text}</p>\r\n              <p className=\"message-container_message_info\">\r\n                {elem.username} - {elem.date}\r\n              </p>\r\n            </div>\r\n          );\r\n        })\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MessageField;\r\n","import { useState, useRef } from \"react\";\r\nimport \"./chat_input.css\";\r\nimport send_orange from \"../../assets/img/Send_orange.png\";\r\nimport send_black from \"../../assets/img/Send_black.png\";\r\n\r\nfunction ChatInput(props) {\r\n  const { sendMessage } = props;\r\n  const [message, setMessage] = useState(\"\");\r\n  const inpRef = useRef(\"\");\r\n  function changeHandler(e) {\r\n    setMessage(e.target.textContent);\r\n  }\r\n\r\n  function sendMessageHandler() {\r\n    if (message.length > 0) {\r\n      sendMessage(message);\r\n      setMessage(\"\");\r\n      inpRef.current.textContent = \"\";\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat-input\">\r\n      <div\r\n        className=\"chat-input_input_field\"\r\n        type=\"text\"\r\n        contenteditable=\"true\"\r\n        placeholder=\"Text here..\"\r\n        value={message}\r\n        ref={inpRef}\r\n        onInput={changeHandler}\r\n      ></div>\r\n      <button className=\"chang-input__send\" onClick={sendMessageHandler}>\r\n        <img src={send_orange}></img>\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatInput;\r\n","export default \"data:image/png;base64,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\"","import { useState } from \"react\";\r\nimport \"./authorization.css\";\r\n\r\nfunction Authorization(props) {\r\n  const {setUsername}=props;\r\n  const [username, setUsernameInput] = useState(\"\");\r\n  \r\n  function changeHandler(e) {\r\n    setUsernameInput(e.target.value);\r\n  }\r\n  function setUsernameHandler(){\r\n    setUsername(username)\r\n  }\r\n\r\n  return (\r\n    <div className=\"authorization-body\">\r\n      <div className=\"authorization-body__pop-up\">\r\n        <p className=\"authorization-body__pop-up-header\">Вход в чат</p>\r\n        <p className=\"authorization-body__pop-up-login\">Введите username</p>\r\n        <input\r\n          className=\"authorization-body__pop-up__username-input\"\r\n          type=\"text\"\r\n          onChange={changeHandler}\r\n          value={username}\r\n        ></input>\r\n        <button className=\"authorization-body__pop-up__authorization-button\" onClick={setUsernameHandler}>\r\n          Войти\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Authorization;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst authorized = createSlice({\r\n  name: \"authorized\",\r\n  initialState: {\r\n    authorized: false,\r\n    userId: null,\r\n  },\r\n  reducers: {\r\n    logIn(state, action) {\r\n      const { username } = action.payload;\r\n      state.authorized = true;\r\n      state.userId = username;\r\n    },\r\n    logOut(state) {\r\n      state.authorized = false;\r\n      state.userId = null;\r\n    },\r\n  },\r\n});\r\n\r\nexport default authorized.reducer;\r\nexport const actions = authorized.actions;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst chatRooms = createSlice({\r\n  name: \"chatRooms\",\r\n  initialState: {\r\n    rooms: {},\r\n    currentRoom: null,\r\n  },\r\n  reducers: {\r\n    addRoom(state, action) {\r\n      console.log(actions);\r\n      const { room, id } = action.payload;\r\n      state.rooms[id] = room;\r\n    },\r\n    changeRoom(state, action) {\r\n      const { id } = action.payload;\r\n      state.currentRoomId = id;\r\n    },\r\n    setNewMessage(state, action) {\r\n      const { id, message } = action.payload;\r\n      state.rooms[id].messages.push(message);\r\n    },\r\n  },\r\n});\r\n\r\nexport default chatRooms.reducer;\r\nexport const actions = chatRooms.actions;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst loading = createSlice({\r\n  name: \"loading\",\r\n  initialState: { loading: false, error: false, errorMessage: null },\r\n  reducers: {\r\n    startLoading(state) {\r\n      state.loading = true;\r\n      state.errorMessage = null;\r\n    },\r\n    finishLoading(state) {\r\n      state.loading = false;\r\n      state.errorMessage = null;\r\n    },\r\n    loadingError(state, action) {\r\n      let { errMsg } = action.payload;\r\n      state.error = true;\r\n      state.errorMessage = errMsg;\r\n    },\r\n  },\r\n});\r\n\r\nexport default loading.reducer;\r\nexport const actions = loading.actions;\r\n","import { takeLatest, put, select } from \"@redux-saga/core/effects\";\r\nimport { actions } from \"../store\";\r\n\r\nconst currentRoomsState = (store) => store.chatRooms;\r\n\r\nfunction* acceptJoinToRoom(res) {\r\n  const { status, room } = res.data;\r\n    if (status) {\r\n    let currentRoomState = yield select(currentRoomsState);\r\n    if (currentRoomState.rooms[`${room.id}`] == undefined) {\r\n      yield put(actions.addRoom({ room: room, id: room.id }));\r\n      if(!currentRoomState.currentRoom){\r\n        yield put(actions.changeRoom({id:room.id}))\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction* newRoomMessage(res) {\r\n  const { status, id, message } = res.data;\r\n  if (status) {\r\n    yield put(actions.setNewMessage({ id, message }));\r\n  }\r\n}\r\n\r\nfunction* acceptSetUsername(res) {\r\n  const { status, username } = res.data;\r\n  if (status) {\r\n    yield put(actions.finishLoading());\r\n    yield put(actions.logIn({ username }));\r\n  }\r\n}\r\n\r\nfunction* rootSaga() {\r\n  yield takeLatest(\"queries/accept_join_to_room\", acceptJoinToRoom);\r\n  yield takeLatest(\"queries/new_room_message\", newRoomMessage);\r\n  yield takeLatest(\"queries/accept_set_username\", acceptSetUsername);\r\n}\r\n\r\nexport default rootSaga;","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport createSagaMiddleware from \"redux-saga\";\r\nimport authorization, {\r\n  actions as authorizationActions,\r\n} from \"./reducers/authorization\";\r\nimport chatRooms, { actions as chatRoomsActions } from \"./reducers/chat_rooms\";\r\nimport loading, { actions as loadingActions } from \"./reducers/loading\";\r\nimport rootSaga from \"./middleware/root_saga\";\r\n\r\nconst sagaMiddleware = createSagaMiddleware();\r\n\r\nconst store = configureStore({\r\n  reducer: { chatRooms, authorization, loading},\r\n  middleware: (getDefaultMiddleware) => [\r\n    ...getDefaultMiddleware({ thunk: false, serializableCheck: false }),\r\n    sagaMiddleware,\r\n  ],\r\n});\r\n\r\nsagaMiddleware.run(rootSaga);\r\n\r\nconst actions = { ...authorizationActions, ...loadingActions, ...chatRoomsActions};\r\n\r\nexport { actions };\r\nexport default store;\r\n","import io from \"socket.io-client\";\r\n\r\nconst socket = io(\"http://localhost:3001\");\r\n\r\nexport default socket;\r\n","import socket from \"./socket\";\r\nimport set_username from \"./requests/set_username\";\r\nimport add_message_to_room from \"./requests/add_message_to_room\";\r\nimport create_room from \"./requests/create_room\";\r\nimport join_to_room from \"./requests/join_to_room\";\r\nimport accept_create_room from \"./responses/accept_create_room\";\r\nimport accept_join_to_room from \"./responses/accept_join_to_room\";\r\nimport new_room_message from \"./responses/new_messages_on_room\";\r\nimport accept_set_username from \"./responses/accept_set_username\";\r\nimport store  from \"../store/store\";\r\n\r\nconst ADD_MESSAGE_TO_ROOM = add_message_to_room(socket);\r\nconst SET_USERNAME = set_username(socket);\r\nconst CREATE_ROOM = create_room(socket);\r\nconst JOIN_TO_ROOM = join_to_room(socket);\r\n\r\naccept_create_room(socket)((data) => {\r\n  store.dispatch({ type: \"queries/accept_create_room\", data });\r\n});\r\naccept_join_to_room(socket)((data) => {\r\n  store.dispatch({ type: \"queries/accept_join_to_room\", data });\r\n});\r\nnew_room_message(socket)((data) => {\r\n  store.dispatch({ type: \"queries/new_room_message\", data });\r\n});\r\naccept_set_username(socket)((data) => {\r\n  store.dispatch({ type: \"queries/accept_set_username\", data });\r\n});\r\n\r\nexport { ADD_MESSAGE_TO_ROOM, SET_USERNAME, CREATE_ROOM, JOIN_TO_ROOM };\r\n","export default function add_message_to_room(socket) {\r\n  return function (id, message) {\r\n    socket.emit(\"add_new_message\", { id, message });\r\n  };\r\n}\r\n","export default function set_username(socket) {\r\n  return function (username) {\r\n    socket.emit(\"set_username\", { username });\r\n  };\r\n}\r\n","export default function create_room(socket) {\r\n  return function () {\r\n    socket.emit(\"create_room\");\r\n  };\r\n}\r\n","export default function join_to_room(socket) {\r\n  return function (id) {\r\n    socket.emit(\"join_to_room\", { id });\r\n  };\r\n}\r\n","export default function accept_create_room(socket) {\r\n  return function (fun) {\r\n    socket.on(\"accept_create_room\", (data) => {\r\n      fun(data);\r\n    });\r\n  };\r\n}\r\n","export default function accept_join_to_room(socket) {\r\n  return function (fun) {\r\n    socket.on(\"accept_join_to_room\", (data) => {\r\n      fun(data);\r\n    });\r\n  };\r\n}\r\n","export default function new_room_message(socket) {\r\n  return function (fun) {\r\n    socket.on(\"new_room_message\", (data) => {\r\n      fun(data);\r\n    });\r\n  };\r\n}\r\n","export default function accept_set_username(socket) {\r\n  return function (fun) {\r\n    socket.on(\"accept_set_username\", (data) => {\r\n      console.log(\"accept_set_username\")\r\n      fun(data);\r\n    });\r\n  };\r\n}\r\n","import RoomCarousel from \"../room_carousel/room_carousel\";\r\nimport RoomJoinPanel from \"../roomJoinPanel/room_join_panel\";\r\nimport MessageContainer from \"../message_container/message_container\";\r\nimport ChatInput from \"../chat_input/chat_input\";\r\nimport Authorization from \"../authorization/authorization\";\r\nimport { actions } from \"../../store/store\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport {\r\n  JOIN_TO_ROOM,\r\n  ADD_MESSAGE_TO_ROOM,\r\n  CREATE_ROOM,\r\n  SET_USERNAME,\r\n} from \"../../queries/queries\";\r\n\r\nimport \"./chat_body.css\";\r\n\r\nfunction ChatBody(props) {\r\n  const { rooms, currentRoomId } = useSelector((state) => state.chatRooms);\r\n  const { authorized, userId } = useSelector((state) => state.authorization);\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <div className=\"chat-body\">\r\n      <h1 className=\"chat-body__header\">CHAT APP...</h1>\r\n      <div className=\"chat-body__content\">\r\n        {authorized ? (\r\n          <>\r\n            <RoomCarousel\r\n              items={rooms}\r\n              changeRoom={(id) => dispatch(actions.changeRoom({ id }))}\r\n            ></RoomCarousel>\r\n            <RoomJoinPanel\r\n              joinToRoom={JOIN_TO_ROOM}\r\n              createRoom={CREATE_ROOM}\r\n            ></RoomJoinPanel>\r\n            <MessageContainer\r\n              messages={currentRoomId ? rooms[currentRoomId].messages : []}\r\n              userId={userId}\r\n            ></MessageContainer>\r\n            <ChatInput\r\n              sendMessage={(message) => {\r\n                ADD_MESSAGE_TO_ROOM(currentRoomId, message);\r\n              }}\r\n            ></ChatInput>\r\n          </>\r\n        ) : (\r\n          <Authorization setUsername={SET_USERNAME} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatBody;\r\n","import \"./App.css\";\r\nimport ChatBody from \"./components/chat_body/chat_body\";\r\nimport store from \"./store/store\";\r\nimport { Provider } from \"react-redux\";\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Provider store={store}>\r\n        <ChatBody></ChatBody>\r\n      </Provider>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport './assets/fonts/stylesheet.css'\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}